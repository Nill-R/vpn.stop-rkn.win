---
template: blog
title: VPNы не то чем кажутся(часть третья)
---
Продолжим разговор о протоколах и реализациях VPN, начатый во второй части.

Главной проблемой упомянутых ранее протоколов является наличие единой точки отказа. При падении VPN-сервера падает вся виртуальная сеть и не может соединится. Разработчик WireGuard вообще-то заявляет о том, что WG работает как p2p, но ему все равно необходим единый сервер к которому проходит первоначальное подключение, а дальше уже они пытаются работать напрямую, если такая возможность есть. Можно ли избежать подобной проблемы? Да, можно. Лучшим ответом на эту проблему являются  PeerVPN(https://peervpn.net/) и tinc-vpn(https://www.tinc-vpn.org)

## PeerVPN
Чистый p2p(point-to-point) VPN. Не имеет единой точки отказа. Мало того, что узлы при возможности работают напрямую друг с другом, так и VPN-серверов может быть любое количество. Можно все имеющиеся с белыми(реальными) адресами сервера использовать в качестве точек изначального коннекта при подключении, указав их через пробел в директиве initpeers в конфиге. В случае недоступности одного из серверов клиент подключается ко второму в списке и так далее. В результате нет единой точки отказа при подключении, а так как он p2p, то уже подключившиеся продолжат работать даже при выбытии всех initpeers из сети.

## Tinc
Работает аналогично PeerVPN. Является p2p VPN, после подключения к сети клиенты по возможности устанавливают прямые соединения между собой и работают напрямую. Возможно указание множественных ConnectTo в конфиге клиента, что бы обеспечить отстутствие единой точки отказа.

Главный минус в сравнении с PeerVPN необходимость раскладывания на каждом клиенте файлов с конфигурацией всех других, в которых содержится адрес внутри VPN’а для каждого клиента и его публичный ключ.

Заключение о протоколах
Лично я считаю, что tinc и PeerVPN превосходят своих собратьев имеющих единую точку отказа, так как они более устойчивы к проблемам. К сожалению PeerVPN заброшен автором, собирается только с OpenSSL 1.0 и не собирается с OpenSSL 1.1, что вызывает у меня некоторые опасения на предмет возможных уязвимостей. tinc же активно развивается и его можно рекомендовать к использованию

К сожалению они оба, в отличии от протоколов упомянутых во второй части заметок, не имеют графических клиентов, что затрудняет их использование обычными пользователями.
